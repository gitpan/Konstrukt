<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::Plugin::mail::obfuscator</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../../../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 20:07:29 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Tag_interface'>Tag interface</a>
    <li class='indexItem indexItem2'><a href='#Perl_interface'>Perl interface</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#prepare'>prepare</a>
    <li class='indexItem indexItem2'><a href='#link'>link</a>
    <li class='indexItem indexItem2'><a href='#js_function'>js_function</a>
    <li class='indexItem indexItem2'><a href='#html_link'>html_link</a>
    <li class='indexItem indexItem2'><a href='#text_link'>text_link</a>
    <li class='indexItem indexItem2'><a href='#encrypt'>encrypt</a>
    <li class='indexItem indexItem2'><a href='#obfuscate'>obfuscate</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::Plugin::mail::obfuscator - Hide email addresses from SPAM harvesters.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Tag_interface"
>Tag interface</a></h2>

<pre>        &#60;&#38; mail::obfucator name=&#34;John Doe&#34; mail=&#34;john@doe.com&#34; / &#38;&#62;</pre>

<p>Will generate something like this:</p>

<pre>        &#60;!-- used to decrypt the email address --&#62;
        &#60;script type=&#34;text/javascript&#34;&#62;
        &#60;!--
        function xor_enc(text, key) {
                var result = &#39;&#39;;
                for(i = 0; i &#60; text.length; i++)
                        result += String.fromCharCode(key.charCodeAt(i % key.length) ^ text.charCodeAt(i));
                return result;
        }
        // --&#62;
        &#60;/script&#62;
        
        &#60;script type=&#34;text/javascript&#34;&#62;
        &#60;!--
        document.write(xor_enc(unescape(&#39;encrypted link&#39;), &#39;key to decrypt&#39;));
        --&#62;
        &#60;/script&#62;
        &#60;noscript&#62;
        John Doe: john&#60;img src=&#34;/at_image.gif&#34; alt=&#34;&#38;gt; add @-character here &#38;lt;&#34; /&#62;doe.com
        &#60;/noscript&#62;</pre>

<p>You can also optionally specifiy the complete HTML-link and &#34;text link&#34; if you don&#39;t like the simple one that the plugin generates:</p>

<pre>        &#60;&#38; mail::obfucator
                html=&#34;&#60;a href=&#39;mailto:john@doe.com&#39; class=&#39;some_css_class&#39;&#62;John Doe&#60;/a&#62;&#34;
                text=&#34;Blabla John Doe: john@doe.com&#34; 
        / &#38;&#62;</pre>

<p>This will basically do the same as when you specify the name and description: Encrypt the HTML, obfuscate the text.</p>

<p>Note that you have to use singlequotes instead of doublequotes in the data as doublequotes will collide with those of the mail::obfuscator tag. The singlequotes will be replaced by doublequotes in the result.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perl_interface"
>Perl interface</a></h2>

<pre>        my $obfusc = use_plugin &#39;mail::obfuscator&#39;;
        print $obfunc-&#62;link(mail =&#62; &#39;john@doe.com&#39;, name =&#62; &#39;John Doe&#39;);</pre>

<p>There also are more &#34;low level&#34; methods, which can be used to create a custom composition of the link.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This plugin will put an encrypted/obfuscated email address on the website.</p>

<p>It puts two versions into the website: One for use with JavaScript and one for the case that JS has been disabled.</p>

<p>For JS-capable clients a link will be generated and encrypted on the server. This link will be decrypted and placed on the page using JavaScript.</p>

<p>If the client doesn&#39;t support JavaScript, the email address will only be obfuscated and put on the page. The &#34;@&#34; will be replaced by an image (whose alt-attribute can be <a href="#CONFIGURATION" class="podlinkpod"
>configured</a>). The letters will be encoded as HTML entities and some useless tags/comments will be inserted.</p>

<p>You may omit the <code>name</code> attribute. The email address will then be used as the text of the link.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>You may configure the text, that will replace the @ sign. Defaults:</p>

<pre>        mail/obfuscator/at_replacement &#60;img src=&#34;/at_image.gif&#34; alt=&#34;&#38;gt; add @-character here &#38;lt;&#34; /&#62;</pre>

<p>You may put only an &#34;@&#34; in the alt-attribute, what will allow the user to just copy and paste the address. But this might make it easier for harvesters to find the email address. You may also just replace the @ with the HTML-entity-code &#38;064; which will make is easier for both the user and the harvester.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Inititalization of this class</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare"
>prepare</a></h2>

<p>The output static for static input. All work can be done in the prepare step if there is no dynamic content inside the content of this tag.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="link"
>link</a></h2>

<p>Returns the encrypted/obfuscated link both for JavaScript-capable clients and those which are not.</p>

<p>As every parameter is optional, the parameters to this method must be passed as an hash (&#34;named parameters&#34;):</p>

<pre>        $obfusc-&#62;link(name =&#62; &#39;John Doe&#39;, mail =&#62; &#39;...&#39;, ...)</pre>

<p><b>Parameters</b>:</p>

<ul>
<li>mail - The email address of the addressee.</li>

<li>name - The name of the addressee.</li>

<li>html - A predefined HTML link - the link will not be generated from mail (and name).</li>

<li>text - A predefined text &#34;link&#34; - the &#34;link&#34; will not be generated from mail (and name).</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="js_function"
>js_function</a></h2>

<p>Returns the JavaScript code that contains the function to decrypt the HTML link.</p>

<p>Usually only used internally.</p>

<p><b>Parameters</b>: none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="html_link"
>html_link</a></h2>

<p>Generates the HTML link for the specified name and email address.</p>

<p>Usually only used internally.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$mail - The email address of the addressee</li>

<li>$name - The name of the addressee. Defaults to $mail, if not specified</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="text_link"
>text_link</a></h2>

<p>Generates the obfuscated text link for the specified name and email address.</p>

<p>Usually only used internally.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$mail - The email address of the addressee</li>

<li>$name - The name of the addressee. Optional.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="encrypt"
>encrypt</a></h2>

<p>Encrypts the specified text and returns a piece of HTML/JavaScript which will decrypt it at the client.</p>

<p>Usually only used internally.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$text - The text to be encrypted (usually the HTML link to the mail address)</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="obfuscate"
>obfuscate</a></h2>

<p>Obfuscated the specified text: Encodes each character as HTML entities, inserts comments and invisible tags and replaces any @-character by an image.</p>

<p>Usually only used internally.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$text - The text to be obfuscated (usually the text &#34;link&#34; to the mail address)</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
