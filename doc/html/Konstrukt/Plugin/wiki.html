<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::Plugin::wiki</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 20:07:31 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Markup_Plugins'>Markup Plugins</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Block_Markup%3A'>Block Markup:</a>
      <li class='indexItem indexItem3'><a href='#Inline_Markup%3A'>Inline Markup:</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Backend_Plugins'>Backend Plugins</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Articles%3A'>Articles:</a>
      <li class='indexItem indexItem3'><a href='#Images%3A'>Images:</a>
      <li class='indexItem indexItem3'><a href='#Files%3A'>Files:</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Note_on_page_titles'>Note on page titles</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#prepare_again'>prepare_again</a>
    <li class='indexItem indexItem2'><a href='#execute_again'>execute_again</a>
    <li class='indexItem indexItem2'><a href='#prepare'>prepare</a>
    <li class='indexItem indexItem2'><a href='#execute'>execute</a>
    <li class='indexItem indexItem2'><a href='#convert_markup'>convert_markup</a>
    <li class='indexItem indexItem2'><a href='#postprocess_output'>postprocess_output</a>
    <li class='indexItem indexItem2'><a href='#prepare_templates'>prepare_templates</a>
    <li class='indexItem indexItem2'><a href='#separate_nowiki'>separate_nowiki</a>
    <li class='indexItem indexItem2'><a href='#split_into_blocks'>split_into_blocks</a>
    <li class='indexItem indexItem2'><a href='#merge_similar_neighbours'>merge_similar_neighbours</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::Plugin::wiki - Plugin to convert wiki markup and manage wiki content</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>        &#60;&#38; wiki &#38;&#62;
        = Headline
        
        some text
        &#60;&#38; / &#38;&#62;
        
        &#60;&#38; wiki page=&#34;FooBar&#34; / &#38;&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This plugin will render given wiki markup into an other format (e.g. HTML).</p>

<p>The markup may come from several sources, which are checked in this order:</p>

<ul>
<li>Content between <code>&#60;&#38; wiki &#38;</code>&#62; and <code>&#60;&#38; / &#38;</code>&#62;</li>

<li>Page passed through <code>?wiki_page=somepage</code> cgi parameter</li>

<li>Page specified in the tag attribute: <code>&#60;&#38; wiki page=&#34;somepage&#34; / &#38;</code>&#62;</li>

<li>Default page set in wiki/default_page</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Markup_Plugins"
>Markup Plugins</a></h2>

<p>The markup will be handled by the markup plugins. An overview of the syntax can be found at <a href="../../Konstrukt/Plugin/wiki/syntax.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::syntax</a>. Below are links to the detailed documentation of each markup plugin.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Block_Markup:"
>Block Markup:</a></h3>

<p>All these plugins are derived from the same base class (<a href="../../Konstrukt/Plugin/wiki/blockplugin.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::blockplugin</a>).</p>

<ul>
<li><a href="../../Konstrukt/Plugin/wiki/markup/code.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::code</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/definition.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::definition</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/headline.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::headline</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/hr.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::hr</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/list.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::list</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/paragraph.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::paragraph</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/quote.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::quote</a></li>
</ul>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Inline_Markup:"
>Inline Markup:</a></h3>

<p>All these plugins are derived from the same base class (<a href="../../Konstrukt/Plugin/wiki/inlineplugin.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::inlineplugin</a>).</p>

<ul>
<li><a href="../../Konstrukt/Plugin/wiki/markup/acronym.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::acronym</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/basic.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::basic</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/htmlescape.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::htmlescape</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/link.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::link</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/replace.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::markup::replace</a></li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Backend_Plugins"
>Backend Plugins</a></h2>

<p>The data will be stored and accessed through various backend plugins. Take a look at their documentation for more information about them (e.g. configuration).</p>

<p>All backend plugins are derived from the base class <a href="../../Konstrukt/Plugin/wiki/backend.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend</a>, which explains what requirements must be fulfilled to build an own backend plugin.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Articles:"
>Articles:</a></h3>

<p>Will handle any wiki articles.</p>

<p>The article backends implement the <a href="../../Konstrukt/Plugin/wiki/backend/article.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend::article</a> interface.</p>

<ul>
<li><a href="../../Konstrukt/Plugin/wiki/backend/article/DBI.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend::article::DBI</a></li>
</ul>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Images:"
>Images:</a></h3>

<p>Will handle all images (JPEG, PNG, GIF, ...).</p>

<p>The image backends implement the <a href="../../Konstrukt/Plugin/wiki/backend/image.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend::image</a> interface.</p>

<ul>
<li><a href="../../Konstrukt/Plugin/wiki/backend/image/DBI.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend::image::DBI</a></li>
</ul>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Files:"
>Files:</a></h3>

<p>Will handle all other files.</p>

<p>The file backends implement the <a href="../../Konstrukt/Plugin/wiki/backend/file.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend::file</a> interface.</p>

<ul>
<li><a href="../../Konstrukt/Plugin/wiki/backend/file/DBI.html" class="podlinkpod"
>Konstrukt::Plugin::wiki::backend::file::DBI</a></li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Note_on_page_titles"
>Note on page titles</a></h2>

<p>You might want to use something like</p>

<pre>        &#60;title&#62;&#60;&#38; param key=&#34;wiki_page&#34; &#38;&#62;&#60;+$ title $+&#62;(default title)&#60;+$ / $+&#62;&#60;&#38; / &#38;&#62;&#60;/title&#62;</pre>

<p>in your page layout template to get the title of the wiki pages as your page title. If no wiki_page-param is defined it will default to the title-template value (this may of course vary in your template) supplied for page. If even no title-template value has been specified, the title will default to <code>(default title)</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>You may (but usually don&#39;t want to) configure the processing order of the markup plugins:</p>

<pre>        #defaults
        wiki/block_plugins code quote headline hr list definition paragraph
        wiki/inline_plugins link acronym basic replace htmlescape</pre>

<p>Note that the block plugins will be executed one after another for each block until one plugin returns a true value, which indicates, that this block plugin handles the passed block. No other block plugin will then handle the block.</p>

<p>The inline plugins will always be executed first to last on the whole text.</p>

<p>You may define more specific configuration for each markup plugin. Take a look at the documentation of those.</p>

<p>To define which backends you want to use, use the following setting. There are several backends (article, image, file, ...), which may be implemented in several types (DBI, file, ...). Each backend has to define, for which action (passed with the <code>action</code> CGI parameter) it is responsible. Take a look at the <code>Konstrukt::Plugin::wiki::backend::*</code>-modules. The default backends which are queried for their action responsibilities are:</p>

<pre>        wiki/backends article file image</pre>

<p>You also may specify the backend type to use. Currently only &#39;DBI&#39; is available, which is also the default:</p>

<pre>        wiki/backend_type DBI</pre>

<p>The page, which will be used to display the wiki article, may also be specified. This file is just a plain html file (with konstrukt tags) that must contain a wiki tag:</p>

<pre>        &#60;&#38; wiki / &#38;&#62;</pre>

<p>This tag will then be replaced by the wiki page that should be displayed. The default path to this file is:</p>

<pre>        wiki/base /wiki.html</pre>

<p>If no page, that should be displayed, is specified, a default page will be used:</p>

<pre>        wiki/default_page index</pre>

<p>You may also specify the user level, that is required to to write/edit wiki articles. Default:</p>

<pre>        #every registered user may edit/write articles
        wiki/userlevel_write 0</pre>

<p>Rendered wiki articles get cached to speed up the display. To prevent a collision between other file names and the names of wiki pages in the cache, you can specify a pseudo directory which will be prefixed to the cache names of the wiki pages. Default:</p>

<pre>        wiki/cache_prefix wiki_article_cache/</pre>

<p>This plugin uses templates to display forms and messages. The path to these templates can be customized (and should end with a slash). Default:</p>

<pre>        wiki/template_path /templates/wiki/</pre>

<p>If you use the image- and file-plugin you must create a file, which returns the content of the file, for each plugin. Actually you can choose any filename you like (e.g. /wiki/file/index.html and /wiki/image/index.html) as it will be referenced in the file and image info template (usually /templates/wiki/layout/file_info.template and image_info.template). These files must <b>only</b> consist of:</p>

<pre>        &#60;&#38; wiki::backend::image / &#38;&#62;</pre>

<p>Respectively</p>

<pre>        &#60;&#38; wiki::backend::file / &#38;&#62;</pre>

<p>and <b>no</b> other characters (no newlines, no whitespaces)!</p>

<p>The image backend automatically generates resized versions of the images if a specified width is requested. You may specify the quality (0-100, 100 = best) of the compressed (jpeg, mng, png) image. Default:</p>

<pre>        wiki/image_quality 75</pre>

<p>For further configuration of some submodules take a look at</p>

<ul>
<li><a href="../../Konstrukt/Plugin/wiki/markup/link.html#CONFIGURATION" class="podlinkpod"
>&#34;CONFIGURATION&#34; in Konstrukt::Plugin::wiki::markup::link</a></li>

<li><a href="../../Konstrukt/Plugin/wiki/markup/replace.html#CONFIGURATION" class="podlinkpod"
>&#34;CONFIGURATION&#34; in Konstrukt::Plugin::wiki::markup::replace</a></li>
</ul>

<p>For further configuration of the backend modules take a look at the documentation of those.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Initialization. Will only be used internally.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<p>Installs the stylesheet.</p>

<p><b>Parameters:</b></p>

<p>none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare_again"
>prepare_again</a></h2>

<p>Yes, this plugin may generate new tag nodes in the prepare run.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute_again"
>execute_again</a></h2>

<p>Yes, this plugin may generate new tag nodes in the execute run.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare"
>prepare</a></h2>

<p>This plugin will process static content in the prepare-run.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute"
>execute</a></h2>

<p>Finally process the wiki content</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="convert_markup"
>convert_markup</a></h2>

<p>Will convert the wiki markups in the child nodes of a given node into another markup (usually HTML).</p>

<p>The input child nodes will be replaced by the converted markup.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="postprocess_output"
>postprocess_output</a></h2>

<p>Will run <a href="#prepare_templates" class="podlinkpod"
>&#34;prepare_templates&#34;</a>, <a href="#separate_nowiki" class="podlinkpod"
>&#34;separate_nowiki&#34;</a> and <a href="#merge_similar_neighbours" class="podlinkpod"
>&#34;merge_similar_neighbours&#34;</a> on the passed node.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$node - Node with children to process</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare_templates"
>prepare_templates</a></h2>

<p>This sub takes a node with some child nodes an recursively prepares all template nodes.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$node - Node with children to process</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="separate_nowiki"
>separate_nowiki</a></h2>

<p>Find &#60;nowiki&#62;...&#60;/nowiki&#62;-areas and create separate nodes for them, that will not be processed.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="split_into_blocks"
>split_into_blocks</a></h2>

<p>Walk over the tree and separate it into blocks (which are separated by at least one empty line).</p>

<p>Each block will be moved under a &#34;block node&#34;.</p>

<p>The passed tagnode will only have block nodes below it after this step.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="merge_similar_neighbours"
>merge_similar_neighbours</a></h2>

<p>Your plugin may/should/must use this method if it splits the text into many nodes that may be of similar type (e.g. two plaintext nodes that are not finally parsed.). The splitted text may lead into wrong/missing recognition of markup and in a little slower processing speed.</p>

<p>So if your plugin puts out many nodes of the same type you may want to use this method to consolidate your output.</p>

<p>It is used by the basic-plugin and the link plugin that do much splitting.</p>

<p>Actually this method merges all plaintext nodes that have the same wiki_finished state. It will not recurse into nodes having children.</p>

<p>This one is quite similar to <a href="../../Konstrukt/Parser.html#merge_similar_neighbours" class="podlinkpod"
>&#34;merge_similar_neighbours&#34; in Konstrukt::Parser</a>, but it will not recurse, it will care about the wiki_finished flag and it will not care about comment nodes.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$parent - The node whose children should be processed</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
