<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::Plugin::usermanagement::level</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../../../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 20:07:31 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Tag_interface'>Tag interface</a>
    <li class='indexItem indexItem2'><a href='#Perl_interface'>Perl interface</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#DEPENDENCIES'>DEPENDENCIES</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#execute_again'>execute_again</a>
    <li class='indexItem indexItem2'><a href='#prepare'>prepare</a>
    <li class='indexItem indexItem2'><a href='#execute'>execute</a>
    <li class='indexItem indexItem2'><a href='#level'>level</a>
    <li class='indexItem indexItem2'><a href='#data'>data</a>
    <li class='indexItem indexItem2'><a href='#new_user'>new_user</a>
    <li class='indexItem indexItem2'><a href='#del_user'>del_user</a>
    <li class='indexItem indexItem2'><a href='#show_users'>show_users</a>
    <li class='indexItem indexItem2'><a href='#show_change_level'>show_change_level</a>
    <li class='indexItem indexItem2'><a href='#change_level'>change_level</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::Plugin::usermanagement::level - Information about the users (admin) level.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Tag_interface"
>Tag interface</a></h2>

<pre>                &#60;!-- Show a list of all users and forms to change each user&#39;s level.
                     This is the default if the &#34;show&#34;-attribute is omitted. --&#62;
                &#60;&#38; usermanagement::level show=&#34;users&#34; / &#38;&#62;
                
                &#60;!-- Show the level of the current user.
                     May be useful in conditional templates. --&#62;
                &#60;&#38; usermanagement::level show=&#34;level&#34; / &#38;&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perl_interface"
>Perl interface</a></h2>

<pre>                my $user_level = use_plugin &#39;usermanagement::level&#39;;
                my $level = $user_level-&#62;level();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>User levels:</p>

<p>Every user has an user level, which is represented by a number. The higher this number ist, the more operations will be allowed to this user.</p>

<p>An user that is not registered/logged in has a level of 0. A user that has just registered get the user level 1.</p>

<p>An admin may set the levels of the other users. And the users may do some operations on the website according to their level.</p>

<p>To view all registered users and change the user level of an other user you have to be logged in and you must have an user level that ist greater or equal to the appropriate number defined in your konstrukt.settings:</p>

<pre>        usermanagement/level/superuser_level     3</pre>

<p>Other plugins may have similar settings as well, which define the needed user levels to permit special operations.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DEPENDENCIES"
>DEPENDENCIES</a></h1>

<p>This plugin create a new entry for every newly registered user and deletes it when the user deregisters.</p>

<p>To know when a user (de)registers, this plugin has to register itself for the <code>registered</code> and <code>deregistered</code> events, that the <a href="../../../Konstrukt/Plugins/usermanagement/basic.html#EVENTS" class="podlinkpod"
>basic usermanagement</a> plugin fires.</p>

<p>So this plugin must be initialized before the basic user management plugin is executed. For this to happen, you can preload this plugin like this on the page, where the basic usermanagement is executed:</p>

<pre>        &#60;&#38; perl &#38;&#62;
                #preload plugins, which will react on events (register, deregister)
                use_plugin &#39;usermanagement::level&#39;;
        &#60;&#38; / &#38;&#62;
        &#60;&#38; usermanagement::basic show=&#34;login, changepass, register, sendpass&#34; / &#38;&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>You have to do some konstrukt.settings-configuration to let the plugin know where to get its data and which layout to use. Defaults:</p>

<pre>        #backend
        usermanagement/level/backend         DBI</pre>

<p>See the documentation of the backend modules (e.g. <a href="../../../Konstrukt/Plugin/usermanagement/level/DBI.html#CONFIGURATION" class="podlinkpod"
>&#34;CONFIGURATION&#34; in Konstrukt::Plugin::usermanagement::level::DBI</a>) for their configuration.</p>

<pre>        #layout
        usermanagement/level/template_path   /templates/usermanagement/level/
        #superuser level
        usermanagement/level/superuser_level 3</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Initializes this object. Sets $self-&#62;{backend}, $self-&#62;{template_path}messages/ and $self-&#62;{template_path}layout/.</p>

<p><code>init()</code> will be called the first time this plugin is needed each request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<p>Installs the templates.</p>

<p><b>Parameters:</b></p>

<p>none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute_again"
>execute_again</a></h2>

<p>Yes, this plugin may return dynamic nodes (i.e. template nodes).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare"
>prepare</a></h2>

<p>Prepare method</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute"
>execute</a></h2>

<p>Execute method</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="level"
>level</a></h2>

<p>Returns the level level of the specified user. If no user is specified, the currently logged in user will be used. Returns 0 ist not logged in or user not existant.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user ID</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="data"
>data</a></h2>

<p>Returns all relevant user data as an anonymous hash, if uid exists:</p>

<pre>        { level =&#62; ... }</pre>

<p>Returns an empty hash if the uid doesn&#39;t exist.</p>

<p><b>Parameters</b> (optional):</p>

<ul>
<li>$uid - The user id (optional)</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new_user"
>new_user</a></h2>

<p>Creates a new entry for the given user id.</p>

<p><b>Parameters</b> (optional):</p>

<ul>
<li>$uid - The user id (optional)</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="del_user"
>del_user</a></h2>

<p>Deletes an entry with the given user id.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user id</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="show_users"
>show_users</a></h2>

<p>Returns the Konstrukt-Code to display the existing users.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="show_change_level"
>show_change_level</a></h2>

<p>Returns the Konstrukt-Code to display a form to change the level of a specified user.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="change_level"
>change_level</a></h2>

<p>Takes the HTTP form input and changes the level for the specified user.</p>

<p>Returns a confirmation of the successful change or error messages otherwise.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user whose level should be changed</li>

<li>$level - The new level</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../../Konstrukt/Plugins/usermanagement/level/DBI.html" class="podlinkpod"
>Konstrukt::Plugins::usermanagement::level::DBI</a>, <a href="../../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
