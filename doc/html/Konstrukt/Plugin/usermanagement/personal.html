<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::Plugin::usermanagement::personal</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../../../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 21:00:57 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Tag_interface'>Tag interface</a>
    <li class='indexItem indexItem2'><a href='#Perl_interface'>Perl interface</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#DEPENDENCIES'>DEPENDENCIES</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#execute_again'>execute_again</a>
    <li class='indexItem indexItem2'><a href='#prepare'>prepare</a>
    <li class='indexItem indexItem2'><a href='#execute'>execute</a>
    <li class='indexItem indexItem2'><a href='#data'>data</a>
    <li class='indexItem indexItem2'><a href='#get'>get</a>
    <li class='indexItem indexItem2'><a href='#get_wrappers'>get wrappers</a>
    <li class='indexItem indexItem2'><a href='#set'>set</a>
    <li class='indexItem indexItem2'><a href='#new_user'>new_user</a>
    <li class='indexItem indexItem2'><a href='#del_user'>del_user</a>
    <li class='indexItem indexItem2'><a href='#show'>show</a>
    <li class='indexItem indexItem2'><a href='#change'>change</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::Plugin::usermanagement::personal - Personal information about the user.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Tag_interface"
>Tag interface</a></h2>

<pre>        &#60;&#38; usermanagement::personal / &#38;&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perl_interface"
>Perl interface</a></h2>

<pre>        #get some data:
        my $user_personal = use_plugin &#39;usermanagement::personal&#39; or die;
        $user_personal-&#62;firstname();
        $user_personal-&#62;homepage();
        ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This plugin offers functionality to let each user manage some personal data of itself.</p>

<p>If the HTTP parameter <code>id</code> is set, the personal information page of the user with that id will be shown.</p>

<p>Otherwise a form to change the personal information of the user, which is currently logged in, will be shown.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DEPENDENCIES"
>DEPENDENCIES</a></h1>

<p>This plugin create a new entry for every newly registered user and deletes it when the user deregisters.</p>

<p>To know when a user (de)registers, this plugin has to register itself for the <code>registered</code> and <code>deregistered</code> events, that the <a href="../../../Konstrukt/Plugins/usermanagement/basic.html#EVENTS" class="podlinkpod"
>basic usermanagement</a> plugin fires.</p>

<p>So this plugin must be initialized before the basic user management plugin is executed. For this to happen, you can preload this plugin like this on the page, where the basic usermanagement is executed:</p>

<pre>        &#60;&#38; perl &#38;&#62;
                #preload plugins, which will react on events (register, deregister)
                use_plugin &#39;usermanagement::personal&#39;;
        &#60;&#38; / &#38;&#62;
        &#60;&#38; usermanagement::basic show=&#34;login, changepass, register, sendpass&#34; / &#38;&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>You have to do some konstrukt.settings-configuration to let the plugin know where to get its data and which layout to use. Defaults:</p>

<pre>        #backend
        usermanagement/basic/backend DBI</pre>

<p>See the documentation of the backend modules (e.g. <a href="../../../Konstrukt/Plugin/usermanagement/basic/DBI.html#CONFIGURATION" class="podlinkpod"
>&#34;CONFIGURATION&#34; in Konstrukt::Plugin::usermanagement::basic::DBI</a>) for their configuration.</p>

<pre>        #layout
        usermanagement/personal/template_path /templates/usermanagement/personal/</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Initializes this object. Sets $self-&#62;{backend} and $self-&#62;{template_path}</p>

<p><code>init()</code> will be called the first time this plugin is needed each request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<p>Installs the templates.</p>

<p><b>Parameters:</b></p>

<p>none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute_again"
>execute_again</a></h2>

<p>Yes, this plugin may return dynamic nodes (i.e. template nodes).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare"
>prepare</a></h2>

<p>Prepare method</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute"
>execute</a></h2>

<p>Execute method</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="data"
>data</a></h2>

<p>Returns all relevant user data as an anonymous hash, if uid exists:</p>

<pre>   { nick =&#62; .., firstname =&#62; .., lastname =&#62; .., sex =&#62; ..,
     birth_year =&#62; .., birth_month =&#62; .., birth_day =&#62; ..,
     email =&#62; .., jabber =&#62; .., icq =&#62; .., aim =&#62; .., msn =&#62; .., yahoo =&#62; .., homepage =&#62; ...}</pre>

<p>Returns an empty hash if the uid doesn&#39;t exist.</p>

<p><b>Parameters</b> (optional):</p>

<ul>
<li>$uid - The user id (optional)</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get"
>get</a></h2>

<p>Returns a specified personal information field for a specified user, if the uid exists, undef otherwise.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user ID</li>

<li>$field - The requested personal information field, e.g. &#34;firstname&#34;, &#34;nick&#34;, ...</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_wrappers"
>get wrappers</a></h2>

<p>For an easier access to the data fields of an user you may also use these wapper methods:</p>

<ul>
<li>firstname($uid)</li>

<li>lastname($uid)</li>

<li>nick($uid)</li>

<li>sex($uid)</li>

<li>birth_year($uid)</li>

<li>birth_month($uid)</li>

<li>birth_day($uid)</li>

<li>jabber($uid)</li>

<li>icq($uid)</li>

<li>aim($uid)</li>

<li>msn($uid)</li>

<li>yahoo($uid)</li>

<li>homepage($uid)</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set"
>set</a></h2>

<p>Sets the data specified in the passed hash in the database</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user ID</li>

<li>$data - Hashreference with the data that should be set: { firstname =&#62; .., nick =&#62; .., ... }</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new_user"
>new_user</a></h2>

<p>Creates a new entry for the given user id.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user ID</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="del_user"
>del_user</a></h2>

<p>Deletes an entry with the given user id.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$uid - The user ID</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="show"
>show</a></h2>

<p>Shows the personal information of the user, whose id has been specified via HTTP, or of the current user, if no user id is specified. Only the user itself may change the user data.</p>

<p>Displays the form with the personal user information.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="change"
>change</a></h2>

<p>Changes the personal information specified in an HTTP POST request.</p>

<p>Returns a confirmation of the successful userdata change or error messages otherwise.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../../Konstrukt/Plugins/usermanagement/personal/DBI.html" class="podlinkpod"
>Konstrukt::Plugins::usermanagement::personal::DBI</a>, <a href="../../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
