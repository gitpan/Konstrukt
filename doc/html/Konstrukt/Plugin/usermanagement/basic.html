<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::Plugin::usermanagement::basic</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../../../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 20:07:30 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Tag_interface'>Tag interface</a>
    <li class='indexItem indexItem2'><a href='#Perl_interface'>Perl interface</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#EVENTS'>EVENTS</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#execute_again'>execute_again</a>
    <li class='indexItem indexItem2'><a href='#prepare'>prepare</a>
    <li class='indexItem indexItem2'><a href='#execute'>execute</a>
    <li class='indexItem indexItem2'><a href='#register_show'>register_show</a>
    <li class='indexItem indexItem2'><a href='#register'>register</a>
    <li class='indexItem indexItem2'><a href='#deregister_show'>deregister_show</a>
    <li class='indexItem indexItem2'><a href='#deregister'>deregister</a>
    <li class='indexItem indexItem2'><a href='#login_show'>login_show</a>
    <li class='indexItem indexItem2'><a href='#login'>login</a>
    <li class='indexItem indexItem2'><a href='#logout_show'>logout_show</a>
    <li class='indexItem indexItem2'><a href='#logout'>logout</a>
    <li class='indexItem indexItem2'><a href='#sendpass_show'>sendpass_show</a>
    <li class='indexItem indexItem2'><a href='#sendpass'>sendpass</a>
    <li class='indexItem indexItem2'><a href='#changepass_show'>changepass_show</a>
    <li class='indexItem indexItem2'><a href='#changepass'>changepass</a>
    <li class='indexItem indexItem2'><a href='#id'>id</a>
    <li class='indexItem indexItem2'><a href='#email'>email</a>
    <li class='indexItem indexItem2'><a href='#data'>data</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::Plugin::usermanagement::basic - Basic user management.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Tag_interface"
>Tag interface</a></h2>

<pre>        &#60;!-- example for a page for basic user management.
             &#34;login, register, sendpass, changepass&#34; is the default, so you can
             also omit the &#34;show&#34;-attribute. --&#62;
        &#60;&#38; usermanagement::basic show=&#34;login, register, sendpass, changepass&#34; / &#38;&#62;
        
        &#60;!-- only show login --&#62;
        &#60;&#38; usermanagement::basic show=&#34;login&#34; / &#38;&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perl_interface"
>Perl interface</a></h2>

<pre>        my $user_basic = use_plugin &#39;usermanagement::basic&#39; or die;
        my $id = $user_basic-&#62;id(); #will return the user&#39;s id, if logged in. 0 otherwise
        $user_basic-&#62;data($id); #will return { email =&#62; ..}
        #of the user with the given id
        $user_basic-&#62;email($id); #will return the users email address
        #...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This Konstrukt plugin provides basic user management functionality.</p>

<p>It will care for persistence by using the Konstrukt session management and it allows other plugins to access basic user data like the users id, if logged in.</p>

<pre>        my $user_basic = use_plugin &#39;usermanagement::basic&#39; or die;
        my $id = $user_basic-&#62;id(); #will return the user&#39;s id, if logged in. 0 otherwise
        $user_basic-&#62;data($id); #will return { email =&#62; ..}
        #of the user with the given id
        $user_basic-&#62;email($id); #will return the users email address</pre>

<p>It may also be used for user athentication on your website to provide log-in/ log-out-screens etc:</p>

<pre>        &#60;&#38; usermanagement::basic show=&#34;login, register, sendpass, changepass&#34; / &#38;&#62;</pre>

<p>The &#34;login&#34;-form will enable the user to log in with its email/password if not logged in or a log-off button otherwise.</p>

<p>The &#34;register&#34;-form will enable the user to register itself with its email for the service. A random password will be generated and sent to the given email address.</p>

<p>The &#34;sendpass&#34;-form will enable the user to get its password sent to its email address.</p>

<p>The &#34;changepass&#34;-form will enable the user to change its password.</p>

<p>Disabling some forms will let you split the forms into several pages.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EVENTS"
>EVENTS</a></h1>

<p>This plugin triggers these <a href="../../../Konstrukt/Event.html" class="podlinkpod"
>events</a>:</p>

<ul>
<li><code>Konstrukt::Plugin::usermanagement::basic::registered</code></li>

<li><code>Konstrukt::Plugin::usermanagement::basic::deregistered</code></li>
</ul>

<p>Each with the user id as an argument. So your plugin might register for those events, if it wants to react on these events.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>You have to do some konstrukt.settings-configuration to let the plugin know where to get its data and which layout to use:</p>

<pre>        #backend
        usermanagement/basic/backend       DBI</pre>

<p>See the documentation of the backend modules (e.g. <a href="../../../Konstrukt/Plugin/usermanagement/basic/DBI.html#CONFIGURATION" class="podlinkpod"
>&#34;CONFIGURATION&#34; in Konstrukt::Plugin::usermanagement::basic::DBI</a>) for their configuration.</p>

<pre>        #layout
        usermanagement/basic/template_path /templates/usermanagement/basic/</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Initializes this object. Sets $self-&#62;{backend} and $self-&#62;{template_path}.</p>

<p><code>init()</code> will be called the first time this plugin is needed each request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<p>Installs the templates.</p>

<p><b>Parameters:</b></p>

<p>none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute_again"
>execute_again</a></h2>

<p>Yes, this plugin may return dynamic nodes (i.e. template nodes).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare"
>prepare</a></h2>

<p>Prepare method</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute"
>execute</a></h2>

<p>Execute method</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="register_show"
>register_show</a></h2>

<p>Displays the register form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="register"
>register</a></h2>

<p>Takes the HTTP form input and tries to register a new user. The user will be added to the database and an email will be sent to the users email address.</p>

<p>Returns a confirmation of the successful registration or error messages otherwise</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="deregister_show"
>deregister_show</a></h2>

<p>Displays the deregister form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="deregister"
>deregister</a></h2>

<p>Takes the HTTP form input and tries to deregister an existing user. The user will be removed from the database.</p>

<p>Returns a confirmation of the successful deregistration or error messages otherwise</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="login_show"
>login_show</a></h2>

<p>Displays the login form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="login"
>login</a></h2>

<p>Takes the HTTP form input and tries to login the user. The user id will be saved inside the session.</p>

<p>Returns a confirmation of the successful login or error messages otherwise.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$email - Optional: Username</li>

<li>$pass - Optional: Password</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="logout_show"
>logout_show</a></h2>

<p>Displays the logout form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="logout"
>logout</a></h2>

<p>Logs out the current user. The user id will be removed from the session.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="sendpass_show"
>sendpass_show</a></h2>

<p>Displays the &#34;send password&#34; form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="sendpass"
>sendpass</a></h2>

<p>Generates a new password for the user and sends an email with the password to the user. The email address may be passed as a parameter to this sub. If not passed, it will be received from the HTTP parametes.</p>

<p>Returns a confirmation of the successfully sent email or error messages otherwise.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$email - Optional: The email address of the user to whom the pass should be sent</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="changepass_show"
>changepass_show</a></h2>

<p>Displays the &#34;change password&#34; form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="changepass"
>changepass</a></h2>

<p>Changes the password of the user that is currently logged in. The old password will be checked and the new ones must be identical. The parameters are optional. They will be received from HTTP parameters, if not specified.</p>

<p>Returns a confirmation of the successful password change or error messages otherwise.</p>

<p><b>Parameters</b> (optional):</p>

<ul>
<li>$old_pass - The old password.</li>

<li>$new_pass - The new password.</li>

<li>$new_pass2 - The new password (confirmation).</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="id"
>id</a></h2>

<p>Returns the user id of the user, which is currently logged in, 0 if not logged in.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="email"
>email</a></h2>

<p>Returns the user&#39;s email address, if uid exists, undef otherwise.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="data"
>data</a></h2>

<p>Returns all relevant user data as an anonymous hash, if uid exists:</p>

<pre>        { email =&#62; &#39;a@b.c&#39;, pass =&#62; &#39;&#60;hash&#62;&#39; }</pre>

<p>Returns an empty hash if the uid doesn&#39;t exist.</p>

<p><b>Parameters</b> (optional):</p>

<ul>
<li>$uid - The user id (optional)</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../../Konstrukt/Plugins/usermanagement/basic/DBI.html" class="podlinkpod"
>Konstrukt::Plugins::usermanagement::basic::DBI</a>, <a href="../../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
