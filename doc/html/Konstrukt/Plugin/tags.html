<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::Plugin::tags</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 20:07:30 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Tag_interface'>Tag interface</a>
    <li class='indexItem indexItem2'><a href='#Perl_interface'>Perl interface</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#get'>get</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Only_plugin_specified'>Only plugin specified</a>
      <li class='indexItem indexItem3'><a href='#Plugin_and_entry_specified.'>Plugin and entry specified.</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#get_entries'>get_entries</a>
    <li class='indexItem indexItem2'><a href='#set'>set</a>
    <li class='indexItem indexItem2'><a href='#delete'>delete</a>
    <li class='indexItem indexItem2'><a href='#default_%3AAction'>default :Action</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::Plugin::tags - Tagging plugin</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Tag_interface"
>Tag interface</a></h2>

<pre>        &#60;!-- display all tags as a cloud --&#62;
        &#60;&#38; tags template=&#34;/tags/cloud.template&#34; limit=&#34;30&#34; order=&#34;alpha|count&#34; / &#38;&#62;
        
        &#60;!-- display all tags for a specified plugin.
             limit, order and template are also applicable here --&#62;
        &#60;&#38; tags plugin=&#34;blog|image|...&#34; / &#38;&#62;
        
        &#60;!-- list tags for a specified entry only.
             show, limit, order are ignored. the template attribute is applicable --&#62;
        &#60;&#38; tags plugin=&#34;blog&#34; entry=&#34;42&#34; / &#38;&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perl_interface"
>Perl interface</a></h2>

<pre>        my $tags = use_plugin &#39;tags&#39;;
        
        #get all tags
        my $all_tags = $tags-&#62;get();
        
        #get all tags for a specified plugin
        my $all_blog_tags = $tags-&#62;get(&#39;blog&#39;);
        
        #get tags for a specified content entry (blog entry #42)
        my $all_entry_tags = $tags-&#62;get(&#39;blog&#39;, 42);
        
        #get all entries for a specified tag query
        my $entries = $tags-&#62;get_entries(&#39;must have all this tags&#39;);
        
        #get all blog entries matching the query
        my $entries = $tags-&#62;get_entries(&#39;must have all this tags&#39;, &#39;blog&#39;);
        
        #simple OR sets are also possible
        my $entries = $tags-&#62;get_entries(&#39;must have all this tags {and one of those}&#39;);
        
        #set tags
        $tags-&#62;set(&#39;blog&#39;, 42, &#39;some tags here&#39;);
        
        #delete all tags for a specified entry
        $tags-&#62;delete(&#39;blog&#39;, 42);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This plugin offers easy content tagging and tag managements for other plugins. You can add tagging to your plugin in an instant.</p>

<p>#TODO: devdoc</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>You may do some configuration in your konstrukt.settings to let the plugin know where to get its data and which layout to use. Default:</p>

<pre>        #backend
        tags/backend                  DBI

        #layout
        tags/template_path            /templates/tags/
        tags/default_style            cloud #may be &#34;cloud&#34; or &#34;list&#34;
        tags/default_order            count #may be &#34;count&#34; or &#34;alpha&#34;
        
        #user levels
        tags/userlevel_write          1 #TODO: needed or done by each plugin?</pre>

<p>See the documentation of the backend modules (e.g. <a href="../../Konstrukt/Plugin/tags/DBI.html#CONFIGURATION" class="podlinkpod"
>&#34;CONFIGURATION&#34; in Konstrukt::Plugin::tags::DBI</a>) for their configuration.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Initializes this object. Sets $self-&#62;{backend} and $self-&#62;{template_path}. init will be called by the constructor.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<p>Installs the templates.</p>

<p><b>Parameters:</b></p>

<p>none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get"
>get</a></h2>

<p>Returns the tags for the given criteria. You may optionally specify the plugin and the identifier of a content entry to which the tags belong.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$plugin - Optional: Only return tags of this plugin.</li>

<li>$entry - Optional: Only return tags of this entry (of the specified plugin).</li>

<li>$order - Optional: The order of the tags. May be &#34;alpha&#34; or &#34;count&#34;. Defaults to the Settings <code>tags/default_order</code>. Doesn&#39;t apply, when only retrieving the tags of a specified plugin and entry where the list will always be sorted alphabetically.</li>

<li>$limit - Optional: Only return a specified number of tags.</li>
</ul>

<h3><a class='u' href='#___top' title='click to go to top of document'

>No plugin and no entry specified If you don&#39;t specify the plugin and the entry, a list of all tags will be returned as an array reference of hash references. The tag will be unique in this list. Additionally a count for each tag will be returned:</a></h3>

<pre>        [
                { title =&#62; &#39;tag title&#39;, count =&#62; 23 },
                { title =&#62; &#39;foo&#39;,       count =&#62; 42 },
                ...
        ]</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Only_plugin_specified"
>Only plugin specified</a></h3>

<p>If you only specify the plugin, the same output as above will be returned. But only the tags of the specified plugin will be returned (and counted).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Plugin_and_entry_specified."
>Plugin and entry specified.</a></h3>

<p>Will return a reference to an array containing only the tags for the specified entry of the specified plugin:</p>

<pre>        [
                &#39;tag1&#39;,
                &#39;tag2&#39;,
                ...
        ]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_entries"
>get_entries</a></h2>

<p>Returns the entries, that match a specified tag query string and optionally belong to a specified plugin.</p>

<p>If a plugin is specified the identifier of entries will be returned in an arrayref:</p>

<pre>        [ &#39;someentry&#39;, &#39;someother&#39;, 23, 42, ... ]</pre>

<p>Otherwise the entries will be returned as a reference to an array containing hash references with the identifier and the plugin for each entry:</p>

<pre>        [
                { entry =&#62; &#39;someentry&#39;, plugin =&#62; &#39;someplugin&#39; },
                ...
        ]</pre>

<p><b>Parameters</b>:</p>

<ul>
<li>$tagquery - Tag query string. Multiple, space separated tags will be AND-combined and parsed into an arrayref:
<pre>        sometag &#34;some other tag&#34; foo bar
        -&#62;
        [&#34;sometag&#34;, &#34;some other tag&#34;, &#34;foo&#34;, &#34;bar&#34;]</pre>

<p>To get an OR-combination, put multiple tags into curly brackets, which will be parsed in a nested array ref:</p>

<pre>        sometag {one of these seven tags is enough} baz
        -&#62;
        [&#34;sometag&#34;, [qw/one of these seven tags is enough/], &#34;baz&#34;]</pre>

<p>More complex (nested AND/OR-groups) are not supported.</p>
</li>

<li>$plugin - Optional: Only return entries of this plugin.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set"
>set</a></h2>

<p>Sets the tags for a specified entry.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$plugin - The plugin the entry belongs to</li>

<li>$entry - The identifier of the entry</li>

<li>$tags - String containing all tags which should be set. The tags are space separated. You may put a tag, which contains whitespaces, into quotes:
<pre>        sometag &#34;some other tag&#34; last_tag</pre>
</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delete"
>delete</a></h2>

<p>Deletes the tags for a specified entry or all tags for a specified plugin or even all tags.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$plugin - Optional: The plugin the entry belongs to</li>

<li>$entry - Optional: The identifier of the entry</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="default_:Action"
>default :Action</a></h2>

<p>Default (and only) action for this plugin. Will display a list of tags according to the attributes set in the <code>&#60;&#38; tags / &#38;</code>&#62; tag.</p>

<p>The attributes can be almost freely combined where it makes sense and some will have a default value if not set.</p>

<p>For some examples take a look at the <a href="#SYNOPSIS" class="podlinkpod"
>synopsis</a>.</p>

<p><b>Tag attributes</b>:</p>

<ul>
<li>template - Optional: The path to the template to display the tags. Defaults to &#34;<code>tags/template_path</code> <code>tags/default_style</code> .template&#34;, which can be adjusted in the <a href="#CONFIGURATION" class="podlinkpod"
>settings</a>. You probably want to use your own template depending on the place/purpose you want to list the tags. The template must have a list definition with the name <code>tags</code> and list fields named <code>title</code> and <code>count</code> (with count being optional depending on which tags should be listed). There will also be field values with the names <code>min_count</code> and <code>max_count</code> which may help you to create tag clouds.</li>

<li>limit - Optional: Max. number of tags to display. Defaults to 0 = no limit.</li>

<li>order - Optional: Order of the tags. Either by their total count (<code>count</code>) or alphabetically (<code>alpha</code>). Defaults to the setting <code>tags/default_order</code>.</li>

<li>plugin - Optional: Only show tags of the specified plugin. When not specified all tags will be shown.</li>

<li>entry - Optional: Only show tags of the specified entry (of a specified plugin). Only works, when the <code>plugin</code> attribute is also supplied.</li>
</ul>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>

<li>$content - The content below/inside the tag as a flat string.</li>

<li>$params - Reference to a hash of the passed CGI parameters.</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../Konstrukt/Plugin/tags/DBI.html" class="podlinkpod"
>Konstrukt::Plugin::tags::DBI</a>, <a href="../../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
