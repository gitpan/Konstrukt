<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Konstrukt::SimplePlugin</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpan" type="text/css" href="../cpan.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::CustomHTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008008 at Tue Sep 26 21:01:00 2006 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::CustomHTML, and/or subclassing Pod::Simple::CustomHTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::CustomHTML for advice.
   See 'perldoc Pod::Simple::CustomHTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Writing_own_plugins'>Writing own plugins</a>
    <li class='indexItem indexItem2'><a href='#Using_existing_plugins_(within_your_plugin)'>Using existing plugins (within your plugin)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#init'>init</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#some_action_%3Aaction'>some_action :action</a>
    <li class='indexItem indexItem2'><a href='#default_%3Aaction'>default :action</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS_NOT_DOCUMENTED_HERE'>METHODS NOT DOCUMENTED HERE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#prepare_again'>prepare_again</a>
    <li class='indexItem indexItem2'><a href='#execute_again'>execute_again</a>
    <li class='indexItem indexItem2'><a href='#prepare'>prepare</a>
    <li class='indexItem indexItem2'><a href='#execute'>execute</a>
    <li class='indexItem indexItem2'><a href='#print_event'>print_event</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Konstrukt::SimplePlugin - Base class for simple Konstrukt plugins.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Writing_own_plugins"
>Writing own plugins</a></h2>

<pre>        package Konstrukt::Plugin::my_plugin;
        
        use base &#39;Konstrukt::SimplePlugin&#39;;
        
        #(over)write (some of) the methods: init, default-action, other action handlers.
        
        #per request initialization
        sub init {
                my ($self) = @_;
                #...
        }
        
        #initialization that is needed before the first time your plugin can be used
         
        
        #write methods for your actions (will be called with page.html?${yourpluginname}_action=some_action)
        sub some_action :Action {
                my ($self, $tag, $content, $params) = @_;
                #...
        }
        
        #will be called when no sub matches the action name
        sub default :Action {
                my ($self, $tag, $content, $params) = @_;
                #...
        }
        
        #...</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Using_existing_plugins_(within_your_plugin)"
>Using existing plugins (within your plugin)</a></h2>

<p>Basically:</p>

<pre>        use Konstrukt::Plugin; #import use_plugin
        
        my $plugin = use_plugin &#39;some_plugin&#39;;
        $plugin-&#62;method();</pre>

<p>See <a href="../Konstrukt/Plugin.html#Using_existing_plugins" class="podlinkpod"
>&#34;Using existing plugins&#34; in Konstrukt::Plugin</a> for more details.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Base class for simple Konstrukt plugins.</p>

<p>Only the methods relevant for creating a simple plugin are documented.</p>

<p>Every method that should be accessible from the client must have a <code>:Action</code> attribute. Otherwise it cannot be called from the client.</p>

<p>If you want some more control over what your plugin does (e.g. to gain performance) you may want to inherit <a href="../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>. As <code>SimplePlugin</code> inherits from <code>Plugin</code> you may also take more control of your plugin behaviour as you could when developing a <code>Plugin</code>. The methods aren&#39;t documented here to keep it simple, but you may of course read the <a href="../Konstrukt/Plugin.html" class="podlinkpod"
>Plugin</a> docs and apply (most of) them to your <code>SimplePlugin</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init"
>init</a></h2>

<p>Method that will be called right before the first usage within a request. Here you should do per request initialization work like definition of <a href="../Konstrukt/Settings.html#default" class="podlinkpod"
>default settings</a>.</p>

<p>Should be overridden by the inheriting class.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<p>Should be overloaded by your plugin and its backends, if they need installation before the first run.</p>

<p>The installation should be performed according to the current settings like the selected backend and database settings as well as the template path.</p>

<p>Usually in the backend module this method will create database tables for your plugin. The &#34;main&#34; plugin should load the backend plugin on init, that is defined in the settings, and then the install method will be called automatically on the backend module when it gets loaded.</p>

<p>The &#34;main&#34; plugin may create templates that are needed for the output.</p>

<p>Will be called automatically after the plugin has been loaded and <code>init()</code>ialized, if the setting <code>autoinstall</code> is true.</p>

<p>You may want to use <a href="../Konstrukt/Lib.html#plugin_dbi_install_helper" class="podlinkpod"
>&#34;plugin_dbi_install_helper&#34; in Konstrukt::Lib</a> for the installation of your DBI backend plugins and <a href="../Konstrukt/Lib.html#plugin_file_install_helper" class="podlinkpod"
>&#34;plugin_file_install_helper&#34; in Konstrukt::Lib</a> for the installation of default templates for your plugin, which can be embedded at the end of your plugin module.</p>

<p>Don&#39;t confuse this method with <a href="#init" class="podlinkpod"
>&#34;init&#34;</a>, which will be called once on <b>every</b> request.</p>

<p><b>Parameters:</b></p>

<p>none</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="some_action_:action"
>some_action :action</a></h2>

<p>You have to write a method for each &#34;action&#34; of your plugin. Your method will then be called with the parameters listed below.</p>

<p>The action will be called with <code>page.html?${yourpluginname}action=some_action</code>.</p>

<p>You may <code>print</code> some output here:</p>

<pre>        print &#39;something&#39;;</pre>

<p>Or put out other plugin tags (e.g. <a href="../Konstrukt/Plugin/template.html" class="podlinkpod"
>templates</a>) by adding <a href="../Konstrukt/Parser/Node.html" class="podlinkpod"
>nodes</a> to the result:</p>

<pre>        #put out a template containing another template in a field:
        my $template = use_plugin &#39;template&#39;;
        $self-&#62;add_node($template-&#62;node(&#39;some.template&#39;, { some_field =&#62; $template-&#62;node(&#39;some_other.template&#39;) }));</pre>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag node (and its children) that shall be handled. Contains the plugin tag in the parse tree and all related information - especially the tag attributes:
<pre>        my $source = $tag-&#62;{tag}-&#62;{attributes}-&#62;{src};</pre>

<p>and the content inside the tag (via the parse tree nodes):</p>

<pre>        my $node = $tag-&#62;{first_child};
        while (defined $node) {
                #do stuff on $node-&#62;{content}...
                $node = $node-&#62;{next};
        }</pre>
</li>

<li>$content - The content below/inside the tag as a flat string. (Might be easier to deal with in some cases)</li>

<li>$params - Reference to a hash of the passed CGI parameters.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="default_:action"
>default :action</a></h2>

<p>The default action handler of this plugin. This method will be called, when no action has been specified. For some more info take a look at <a href="#some_action" class="podlinkpod"
>&#34;some_action&#34;</a>.</p>

<p>This sub should be overridden by the inheriting class.</p>

<p><b>Parameters</b>:</p>

<ul>
<li>$tag - Reference to the tag (and its children) that shall be handled.</li>

<li>$content - The content below/inside the tag as a flat string.</li>

<li>$params - Reference to a hash of the passed CGI parameters.</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS_NOT_DOCUMENTED_HERE"
>METHODS NOT DOCUMENTED HERE</a></h1>

<p>To keep it simple some methods that evey plugin has are not documented here, as they are of minor relevance for &#34;simple&#34; plugin.</p>

<p>They are defined with good defaults for a simple plugin and you shouldn&#39;t need to care about them. If you&#39;re interested in this methods nonetheless, read on!</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare_again"
>prepare_again</a></h2>

<p>Returns 0 by default.</p>

<p>See <a href="../Konstrukt/Plugin.html#prepare_again" class="podlinkpod"
>&#34;prepare_again&#34; in Konstrukt::Plugin</a> for more details.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute_again"
>execute_again</a></h2>

<p>Returns 1 by default.</p>

<p>See <a href="../Konstrukt/Plugin.html#execute_again" class="podlinkpod"
>&#34;execute_again&#34; in Konstrukt::Plugin</a> for more details.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepare"
>prepare</a></h2>

<p>Won&#39;t be used by default.</p>

<p>See <a href="../Konstrukt/Plugin.html#prepare" class="podlinkpod"
>&#34;prepare&#34; in Konstrukt::Plugin</a> for more details.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="execute"
>execute</a></h2>

<p>Will handle the request internally and dispatch it to your action methods.</p>

<p>See <a href="../Konstrukt/Plugin.html#execute" class="podlinkpod"
>&#34;execute&#34; in Konstrukt::Plugin</a> for more details.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="print_event"
>print_event</a></h2>

<p>Will be used internally to catch the <code>print</code>s of your plugin.</p>

<p>Works the same way as in <a href="../Konstrukt/Plugin/perl.html#print_event" class="podlinkpod"
>&#34;print_event&#34; in Konstrukt::Plugin::perl</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2006 Thomas Wittek (mail at gedankenkonstrukt dot de). All rights reserved.</p>

<p>This document is free software. It is distributed under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../Konstrukt/Plugin.html" class="podlinkpod"
>Konstrukt::Plugin</a>, <a href="../Konstrukt/Parser/Node.html" class="podlinkpod"
>Konstrukt::Parser::Node</a>, <a href="../Konstrukt.html" class="podlinkpod"
>Konstrukt</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
